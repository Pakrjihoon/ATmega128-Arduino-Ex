#include <mega128.h>
#include <delay.h>
//unsigned char pattern[8] = {0xFE, 0xFD, 0xFB, 0xF7, 0xEF, 0xDF, 0xBF, 0x7F}; // up
unsigned char pattern[8]= { 0x01, 0x02, 0x04, 0x08, 0x10, 0x20, 0x40, 0x80 };
unsigned char pattern1[8] = { 0x80, 0x40, 0x20, 0x10, 0x08, 0x04, 0x02, 0x01 };
unsigned char kim[8] = {0xFF,0x68,0x6A,0x5A,0x3A,0xFA,0x08,0xFF};
unsigned char taek[8] = {0x05,0x55,0x55,0x55,0xFD,0x05,0xDD,0x04};
unsigned char youn[8] = {0xB4,0x16,0x12,0x16,0x12,0x16,0x16,0xB6};
unsigned char name[53] = {0xFF,0xFF,0x68,0x6A,0x5A,0xFF,0x3A,0xFA,0x08,0xFF,
                          0xFF,0x05,0x55,0x55,0x55,0xFD,0x05,0xDD,0x04,
                          0xFF,0xB4,0x16,0x12,0x16,0x12,0x16,0x16,0xB6,0xFF,0xFF,0x0B,0xAB,0xAB,0x0B,0xFB,0x00,0xDF,0xFF,0xDB,0xD7,0xCF,0xD7,0xDB,0xFF,0x41,0xFF,0xF4,0xB6,0x12,0xB6,0xF6,0xFF,0xFF };
                          
unsigned int i ,j =0,q=53, k =0;
int in =1;
void main(void)
{
          
    DDRA = 0xff;
    DDRC = 0xff;
    
    PORTA = 0x00;
    PORTC = 0x00;
    
    EICRB = 0b10100000;
    EIMSK = 0b11000000;
    SREG = 0x80;
                
    while(1) {  
    for(k=0; k<100; k++)
    /*{           
        if(++i==8) i=0;  
          
        PORTC = pattern[i];
        PORTA = name[(q+i)%53];
        delay_ms(1);
    }     
    if(q++==53) q=0;                                                     
    } */ 
    {           
       if(++i==8) i=0;  
          
        PORTC = pattern[i];
        PORTA = name[(q+i)%53];
        delay_ms(1);
    }
    q+=in;     
    if(q==0) q=53;
    else if(q == 53) q = 0;         
    }  
}                        
interrupt [EXT_INT6] void go(void)
{
  in = 1;
}                                                     
  
interrupt [EXT_INT7] void back(void)
{
  in = -1;
} 